// 为所有 Flutter 插件项目提供默认的 flutter 对象
// 这个文件使用 Groovy 语法，确保与插件的 build.gradle 兼容

allprojects {
    beforeEvaluate { project ->
        // 只为插件项目（不是 app 项目）注入配置
        if (project.path != ":app" && project.path.startsWith(":")) {
            // 创建一个包含 compileSdkVersion 的配置对象
            // 使用 Expando 来创建一个动态对象，支持属性访问
            def flutterConfig = new Expando()
            flutterConfig.compileSdkVersion = 34
            flutterConfig.targetSdkVersion = 34
            flutterConfig.minSdkVersion = 24
            
            // 将 flutter 对象注入到项目的 ext 中
            project.ext.set("flutter", flutterConfig)
        }
    }
}
